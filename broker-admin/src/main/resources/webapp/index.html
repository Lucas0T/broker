<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="requests.css"/>
		<!--<script src="https://code.jquery.com/jquery-3.2.1.min.js"
		  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
		  crossorigin="anonymous"></script>-->
		
		<script src="jquery-3.2.1.min.js"></script>
		<script src="js.cookie-2.1.4.min.js"></script>
		<script src="check-auth.js"></script>
		<script src="requests.js"></script>
		<script src="load-request-template.js"></script>
	</head>
	<body>
		<section>
			<h1>Anfragen</h1>
			<a href="nodes.html">View nodes</a>
			<div id="requests">
			</div>
		</section>
		<hr/>
		<section id="create">
			<h1>Neue Anfrage</h1>
			<form id="new_request">
				<legend>Referenzzeitpunkt <input type="datetime-local" name="reference" required="yes" /></legend>
				<legend>Geplante Ausführung <input type="date" name="scheduled" required="yes" /></legend>
				<legend>Titel <input type="text" name="title" data-jpath="title" required="yes" /></legend>
				<legend>Beschreibung <br/><textarea name="description" data-jpath="description"></textarea></legend>
				<fieldset>
					<legend>Auftraggeber</legend>
					<legend>Name <input type="text" name="p_name" data-jpath="principal name" required="true" /></legend>
					<legend>Organisation <input type="text" data-jpath="principal organisation" name="p_org"/></legend>
					<legend>E-Mail <input type="text" name="p_email" data-jpath="principal email" required="true" /></legend>
				</fieldset>
				<fieldset id="x_exec">
					<legend>Zeitraum (einmalige Ausführung)</legend>
					<legend>Zeitraum <select name="x_dur" data-jpath="schedule duration">
						<option value="-P6M">Zurückliegende 6 Monate</option>
						<option value="-P3M">Zurückliegende 3 Monate</option>
						<option value="-P1M">Zurückliegender Monat</option>
						<option value="-P7D">Zurückliegende Woche</option>
						<option value="P1M">Folgender Monat</option>
						<option value="P7D">Folgende 7 Tage</option>
					</select></legend>
				</fieldset>
				<fieldset>
					<legend>Notaufnahmen</legend>
					<legend>alle<input type="radio" id="limit_target_a" name="limit_target" /></legend>
					<legend>ausgewählte<input type="radio" id="limit_target_s" name="limit_target" /></legend>
					<select name="target" id="target" multiple="multiple" style="height:10em">
					</select>
				</fieldset>
				
				<legend>Query XML<br/><textarea name="xml" required="yes"></textarea></legend>
				<button>Neue Anfrage</button>
			</form>
			<form id="hidden_fields" style="display:none">
					<legend id="x_intvl">Intervall (ca.)<input type="text" name="x_intvl" data-jpath="schedule interval" pattern="P[0-9]+[DM]" /></legend>
					<legend id="x_qid">Query ID<input type="text" id="x_qid" name="x_qid" data-jpath="schedule id" /></legend>
			</form>
		</section>
	</body>
</html>
